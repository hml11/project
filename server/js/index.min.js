"use strict";var _createClass=function(){function n(i,s){for(var t=0;t<s.length;t++){var n=s[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}return function(i,s,t){return s&&n(i.prototype,s),t&&n(i,t),i}}();function _classCallCheck(i,s){if(!(i instanceof s))throw new TypeError("Cannot call a class as a function")}var Banner=function(){function i(){_classCallCheck(this,i),this.img=$("#banner").children(".imgbox").children("a"),this.left=$("#banner .left"),this.right=$("#banner .right"),this.li=$("#banner .list").children("li"),this.index=0,this.iprev=this.img.length-1,this.init(),this.autoPlay()}return _createClass(i,[{key:"init",value:function(){var i=this;this.left.click(function(){i.changeIndex("l")}),this.right.click(function(){i.changeIndex("r")}),this.li.mouseover(function(){$(this).index()>i.index&&i.moveList(1,i.index,$(this).index()),$(this).index()<i.index&&i.moveList(-1,i.index,$(this).index()),i.li.eq(i.index).css({opacity:.6}).end().eq($(this).index()).css({opacity:1}),i.li.children("i").eq(i.index).css({display:"none"}).end().eq($(this).index()).css({display:"block"}),i.index=$(this).index()})}},{key:"changeIndex",value:function(i){"l"==i?(0==this.index?(this.index=this.img.length-1,this.iprev=0):(this.index--,this.iprev=this.index+1),this.move(1)):(this.index==this.img.length-1?(this.index=0,this.iprev=this.img.length-1):(this.index++,this.iprev=this.index-1),this.move(-1))}},{key:"move",value:function(i){this.img.eq(this.index).css({left:-this.img.eq(0).width()*i}),this.img.eq(this.index).animate({left:0}),this.img.eq(this.iprev).css({left:0}),this.img.eq(this.iprev).animate({left:this.img.eq(0).width()*i}),this.li.eq(this.iprev).css({opacity:.6}).end().eq(this.index).css({opacity:1}),this.li.children("i").eq(this.iprev).css({display:"none"}).end().eq(this.index).css({display:"block"})}},{key:"moveList",value:function(i,s,t){this.img.eq(s).css({left:0}).stop().animate({left:this.img.eq(0).width()*i}).end().eq(t).css({left:this.img.eq(0).width()*i}).stop().animate({left:0})}},{key:"autoPlay",value:function(){var i=void 0,s=this;i=setInterval(function(){s.right.trigger("click")},1e3),$("#banner").hover(function(){clearInterval(i)},function(){i=setInterval(function(){s.right.trigger("click")},1e3)})}}]),i}();new Banner,$(".order").children("a").hover(function(){$(this).css({border:"1px solid #ccc",borderBottom:0}).siblings("ul").show()},function(){$(this).css({border:0}).siblings("ul").hide()}),$(".download").children("a").hover(function(){$(this).siblings(".imgbox").show()},function(){$(this).siblings(".imgbox").hide()}),$(".wechat").children("span").hover(function(){$(this).siblings(".imgbox").show()},function(){$(this).siblings(".imgbox").hide()}),$("#txt").focus(function(){$(this).attr("placeholder","")}).blur(function(){$(this).attr("placeholder","带上六一装扮 第二件半价")}),$(".new_category_list").children("li").mouseover(function(){$(this).children(".category_hover_wrap").css({display:"flex"})}).mouseout(function(){$(this).children(".category_hover_wrap").css({display:"none"})}),$("main img").hover(function(){$(this).css({opacity:.6})},function(){$("img").css({opacity:1})});var Index=function(){function i(){_classCallCheck(this,i),this.notLogin=document.querySelector(".not-login"),this.loginS=document.querySelector(".login-success"),this.user=document.querySelector(".login-success span"),this.logout=document.querySelector(".logout"),this.init(),this.addEvent()}return _createClass(i,[{key:"addEvent",value:function(){var s=this;this.logout.onclick=function(){for(var i=0;i<s.usermsg.length;i++)if(s.name==s.usermsg[i].user)return s.usermsg[i].onoff=0,s.notLogin.style.display="block",s.loginS.style.display="none",void localStorage.setItem("usermsg",JSON.stringify(s.usermsg))}}},{key:"init",value:function(){this.usermsg=localStorage.getItem("usermsg")?JSON.parse(localStorage.getItem("usermsg")):[],this.check()}},{key:"check",value:function(){for(var i=0;i<this.usermsg.length;i++)if(1==this.usermsg[i].onoff)return this.notLogin.style.display="none",this.loginS.style.display="block",this.user.innerHTML=this.usermsg[i].user,void(this.name=this.usermsg[i].user)}}]),i}();new Index,$(".stairs").children("li").click(function(){$("html").animate({scrollTop:$("main").children(".margin").children("div").eq($(this).index()).offset().top})});var Search=function(){function i(){_classCallCheck(this,i),this.txt=$("#txt"),this.list=$(".searchList"),this.url="https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su",this.index=0,this.onoff=0,this.init(),this.addEvent()}return _createClass(i,[{key:"init",value:function(){var s=this;this.txt.on("input",function(){$.ajax({url:s.url,data:{wd:s.txt.val()},success:function(i){s.res=i,s.display()},dataType:"jsonp",jsonp:"cb"})})}},{key:"display",value:function(){1==this.onoff&&this.list.css({display:"block"});for(var i="",s=0;s<this.res.s.length;s++)i+="<li index="+s+">\n                        "+this.res.s[s]+"\n                        </li>";this.list.html(i)}},{key:"addEvent",value:function(){var i=this;this.list.on("click","li",function(){i.txt.val($(this).html()),i.list.hide()})}}]),i}();new Search;var Product=function(){function i(){_classCallCheck(this,i),this.list=$(".hotsale").children("ul"),this.mlist=$(".boys").children("dl"),this.glist=$(".girls").children("dl"),this.klist=$(".kids").children("dl"),this.slist=$(".shoes").children("dl"),this.url="http://localhost:8383/data/data.json",this.init()}return _createClass(i,[{key:"init",value:function(){var s=this;$.ajax({url:this.url,success:function(i){s.res=i,s.display(),s.link()}})}},{key:"link",value:function(){$(".goods_list").on("click",".goodslist",function(){var i=$(this).attr("id");location.href="http://localhost:8383/details/details.html?shangpin="+i})}},{key:"display",value:function(){for(var i=this,s="",t='<dt>\n                    <a href="">\n                        <img src="images/loading.gif" data-src="https://img.banggo.com/sources/cms/banggo2017/PC/pc_190425lc_01.jpg" alt="">\n                    </a>\n                </dt>',n='<dt>\n                    <a href="">\n                        <img src="images/loading.gif" data-src="https://img.banggo.com/sources/cms/banggo2017/PC/pc_190425lc_02.jpg" alt="">\n                    </a>\n                </dt>',e='<dt>\n                    <a href="">\n                        <img src="images/loading.gif" data-src="https://img.banggo.com/sources/cms/banggo2017/PC/pc_190425lc_03.jpg" alt="">\n                    </a>\n                </dt>',a='<dt>\n                    <a href="">\n                        <img src="images/loading.gif" data-src="https://img.banggo.com/sources/cms/banggo2017/PC/pc_190425lc_04.jpg" alt="">\n                    </a>\n                </dt>',l=0;l<this.res.length;l++)"hot"==this.res[l].type&&(s+='<li class="goodslist" id='+this.res[l].id+'>\n                        <div class="goods_img_box">\n                            <a>\n                                <img class="goods_img" src="images/loading.gif" data-src="'+this.res[l].src+'">\n                            </a>\n                        </div>\n                        <div class="name">\n                            <label class="goodlist_discount">'+this.res[l].discount+'</label>\n                            <a class="brand_name">'+this.res[l].brandname+"</a>\n                            <span>\n                                <a>"+this.res[l].name+'</a>\n                            </span>\n                        </div>\n                        <div class="price">\n                            <b>￥'+this.res[l].price+"</b>\n                            <i>￥"+this.res[l].oldprice+"</i>\n                        </div>\n                    </li>"),"m"==this.res[l].type&&(t+='<dd class="goodslist" id='+this.res[l].id+'>\n                            <div class="goods_img_box">\n                                <a>\n                                    <img class="goods_img" src="images/loading.gif" data-src="'+this.res[l].src+'">\n                                </a>\n                            </div>\n                            <div class="name">\n                                <label class="goodlist_discount">'+this.res[l].discount+'</label>\n                                <a class="brand_name">'+this.res[l].brandname+"</a>\n                                <span>\n                                    <a>"+this.res[l].name+'</a>\n                                </span>\n                            </div>\n                            <div class="price">\n                                <b>￥'+this.res[l].price+"</b>\n                                <i>￥"+this.res[l].oldprice+"</i>\n                            </div>\n                        </dd>"),"w"==this.res[l].type&&(n+='<dd class="goodslist" id='+this.res[l].id+'>\n                            <div class="goods_img_box">\n                                <a>\n                                    <img class="goods_img" src="images/loading.gif" data-src="'+this.res[l].src+'">\n                                </a>\n                            </div>\n                            <div class="name">\n                                <label class="goodlist_discount">'+this.res[l].discount+'</label>\n                                <a class="brand_name">'+this.res[l].brandname+"</a>\n                                <span>\n                                    <a>"+this.res[l].name+'</a>\n                                </span>\n                            </div>\n                            <div class="price">\n                                <b>￥'+this.res[l].price+"</b>\n                                <i>￥"+this.res[l].oldprice+"</i>\n                            </div>\n                        </dd>"),"kid"==this.res[l].type&&(e+='<dd class="goodslist" id='+this.res[l].id+'>\n                            <div class="goods_img_box">\n                                <a>\n                                    <img class="goods_img" src="images/loading.gif" data-src="'+this.res[l].src+'">\n                                </a>\n                            </div>\n                            <div class="name">\n                                <label class="goodlist_discount">'+this.res[l].discount+'</label>\n                                <a class="brand_name">'+this.res[l].brandname+"</a>\n                                <span>\n                                    <a>"+this.res[l].name+'</a>\n                                </span>\n                            </div>\n                            <div class="price">\n                                <b>￥'+this.res[l].price+"</b>\n                                <i>￥"+this.res[l].oldprice+"</i>\n                            </div>\n                        </dd>"),"shoes"==this.res[l].type&&(a+='<dd class="goodslist" id='+this.res[l].id+'>\n                            <div class="goods_img_box">\n                                <a>\n                                    <img class="goods_img" src="images/loading.gif" data-src="'+this.res[l].src+'">\n                                </a>\n                            </div>\n                            <div class="name">\n                                <label class="goodlist_discount">'+this.res[l].discount+'</label>\n                                <a class="brand_name">'+this.res[l].brandname+"</a>\n                                <span>\n                                    <a>"+this.res[l].name+'</a>\n                                </span>\n                            </div>\n                            <div class="price">\n                                <b>￥'+this.res[l].price+"</b>\n                                <i>￥"+this.res[l].oldprice+"</i>\n                            </div>\n                        </dd>");this.list.html(s),this.mlist.html(t),this.glist.html(n),this.klist.html(e),this.slist.html(a);for(l=0;l<$("label").length;l++)""==$("label").eq(l).html()&&$("label").eq(l).css({border:0,background:"none"});onscroll=function(){i.lazyLog()},this.setOpacity()}},{key:"lazyLog",value:function(){for(var i=document.querySelectorAll(".goods_list img"),s=document.documentElement.clientHeight,t=document.documentElement.scrollTop,n=0;n<i.length;n++)"http://localhost:8383/images/loading.gif"==i[n].src&&i[n].offsetTop<s+t&&(i[n].src=i[n].getAttribute("data-src"))}},{key:"setOpacity",value:function(){$(".goods_list img").hover(function(){$(this).css({opacity:.6})},function(){$(this).css({opacity:1})})}}]),i}();new Product;